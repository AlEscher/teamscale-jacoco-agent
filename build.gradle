ext {
    appVersion = '11.0.2'
    pluginVersion = '0.3.0'
    reportGeneratorVersion = '1.2.2'
    teamscaleClientVersion = '0.2.3'

    // When upgrading JaCoCo to a newer version make sure to check the comment in the AnalyzerCache.java.
    jacocoVersion = '0.8.1'
    log4jVersion = '2.8.2'

    // Needed to deploy the artifacts to our public share
    // Your public RSA key needs to be stored on the share to be able to deploy (Ask Timo)
    cqseMavenRepositoryPrivateKey = System.getProperty("user.home") + '/.ssh/id_rsa'
    cqseMavenRepositoryUrl = 'scp://ext1.cqse.eu:2222/var/www/share/exchange/public/maven'
    cqseMavenRepositoryUser = 'www-data'
}

subprojects {
    group 'com.teamscale'
    
    configurations {
        deployerJars
    }

    repositories {
        ivy {
            url 'https://share.cqse.eu/svn/artifacts/ivy'
        }
        jcenter()
    }

    dependencies {
        deployerJars 'org.apache.maven.wagon:wagon-ssh:2.2'
    }
}

// Installs the plugin to your local maven repository
task installGradlePlugin(dependsOn: [
        ':agent:install',
        ':impacted-tests-executor:install',
        ':report-generator:install',
        ':teamscale-gradle-plugin:install',
        ':teamscale-client:install'
])

// Installs the plugin to your local maven repository without the agent
task iGP(dependsOn: [
        ':impacted-tests-executor:install',
        ':report-generator:install',
        ':teamscale-gradle-plugin:install',
        ':teamscale-client:install'
])

// Deploys the plugin to the public share
task deployGradlePlugin(dependsOn: [
        ':agent:uploadShadow',
        ':impacted-tests-executor:uploadArchives',
        ':report-generator:uploadShadow',
        ':teamscale-gradle-plugin:uploadShadow',
        ':teamscale-client:uploadArchives'
])

// Deploys the plugin to the public share without the agent
task dGP(dependsOn: [
        ':impacted-tests-executor:uploadArchives',
        ':report-generator:uploadShadow',
        ':teamscale-gradle-plugin:uploadShadow',
        ':teamscale-client:uploadArchives'
])